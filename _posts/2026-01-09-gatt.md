---
# YAML Front Matter：文章設定區塊
title: "利用互動式甘特圖追蹤工作及分派任務"
description: "工作需要管理各樣任務，擔任管理人需要及時掌握工作的優先次序以及先後緩急，利用甘特圖技巧可以掌握工作並組織團隊，激勵士氣"
categories: ["Frappe Gantt",'資料分析']   # 這是您的分類，可以自己決定
tags: ["Html","Gemini"]           # 這是文章的標籤
---

<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>政府專案管理</title>
    <!-- 引入 Tailwind CSS 用於快速佈局 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 Frappe Gantt 官方樣式與腳本 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/frappe-gantt/0.6.1/frappe-gantt.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/frappe-gantt/0.6.1/frappe-gantt.min.js"></script>
    <style>
        /* 自定義甘特圖樣式優化 */
        .gantt-container {
            overflow: auto;
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        /* 調整任務條顏色 */
        .gantt .bar-completed {
            fill: #10b981 !important; /* 綠色 */
        }
        .gantt .bar-progress {
            fill: #3b82f6 !important; /* 藍色 */
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4 md:p-8">

    <div class="max-w-6xl mx-auto">
        <!-- 標題區域 -->
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">政府專案管理</h1>
            <p class="text-gray-600">以2025年為例</p>
        </header>

        <!-- 控制工具列 -->
        <div class="bg-white p-4 rounded-lg shadow-sm mb-6 flex flex-wrap items-center justify-between gap-4">
            <div class="flex items-center space-x-2">
                <span class="text-sm font-medium text-gray-700">檢視模式：</span>
                <div class="inline-flex rounded-md shadow-sm" role="group">
                    <button onclick="changeView('Quarter Day')" class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-l-lg hover:bg-gray-100 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700">
                        時
                    </button>
                    <button onclick="changeView('Day')" class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700">
                        日
                    </button>
                    <button onclick="changeView('Week')" class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700">
                        週
                    </button>
                    <button onclick="changeView('Month')" class="px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-r-lg hover:bg-gray-100 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700">
                        月
                    </button>
                </div>
            </div>
            
            <div id="status-msg" class="text-sm text-blue-600 font-medium italic">
                您可以直接拖拽或縮放任務條來調整日期
            </div>
        </div>

        <!-- 甘特圖容器 -->
        <div class="gantt-container border border-gray-200">
            <svg id="gantt-target"></svg>
        </div>

        <!-- 說明卡片 -->
        <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
                <h3 class="font-bold text-blue-800 mb-1">拖拽互動</h3>
                <p class="text-sm text-blue-700">點擊並移動任務條可更改日期，拉動邊緣可縮放工期。</p>
            </div>
            <div class="bg-green-50 p-4 rounded-lg border border-green-100">
                <h3 class="font-bold text-green-800 mb-1">依賴關係</h3>
                <p class="text-sm text-green-700">任務間的箭頭代表先後順序，確保專案邏輯正確。</p>
            </div>
            <div class="bg-purple-50 p-4 rounded-lg border border-purple-100">
                <h3 class="font-bold text-purple-800 mb-1">進度追蹤</h3>
                <p class="text-sm text-purple-700">顏色深淺代表完成百分比，一目了然專案現況。</p>
            </div>
        </div>
    </div>

    <script>
        // 1. 定義初始任務數據
        const tasks = [
            {
                id: 'task-1',
                name: '政府專案啟動',
                start: '2025-01-01',
                end: '2025-03-31',
                progress: 100,
                dependencies: ''
            },
            {
                id: 'task-2',
                name: '專案徵件，每案200萬',
                start: '2025-03-01',
                end: '2025-05-31',
                progress: 60,
                dependencies: 'task-1'
            },
            {
                id: 'task-3',
                name: '徵件審查，15案啟動',
                start: '2025-06-01',
                end: '2025-08-31',
                progress: 50,
                dependencies: 'task-1'
            },
            {
                id: 'task-4',
                name: '課程開發，每案4門課程，共60門課程',
                start: '2025-09-01',
                end: '2025-12-31',
                progress: 40,
                dependencies: 'task-2, task-3'
            },
            {
                id: 'task-5',
                name: '導入量化指標與質化分析',
                start: '2025-08-01',
                end: '2025-11-30',
                progress: 100,
                dependencies: 'task-4'
            },
            {
                id: 'task-6',
                name: '舉辦工作會議，每半年檢核執行成果',
                start: '2025-12-01',
                end: '2025-12-31',
                progress: 80,
                dependencies: 'task-4'
            }
        ];

        // 2. 初始化甘特圖實例
        let gantt = new Gantt("#gantt-target", tasks, {
            header_height: 50,
            column_width: 30,
            step: 24,
            view_modes: ['Month','Week','Quarter Day', 'Half Day', 'Day'],
            bar_height: 30,
            bar_corner_radius: 4,
            arrow_curve: 5,
            padding: 18,
            view_mode: 'Month', // 預設檢視模式
            language: 'zh',   // 設置為中文
            
            // 事件監聽：當點擊任務時
            on_click: function (task) {
                console.log("點擊了任務:", task.name);
                showStatus(`您選取了：${task.name}`);
            },
            
            // 事件監聽：當日期被更改時（拖拽或縮放）
            on_date_change: function(task, start, end) {
                console.log("日期變更:", task.name, start, end);
                showStatus(`已更新「${task.name}」的日期`);
            },
            
            // 事件監聽：當進度被更改時
            on_progress_change: function(task, progress) {
                console.log("進度變更:", task.name, progress);
                showStatus(`「${task.name}」進度更新為 ${progress}%`);
            },

            // 自定義滑鼠懸停彈窗的內容
            custom_popup_html: function(task) {
                const end_date = task._end.toLocaleDateString();
                return `
                    <div class="p-3 bg-white border border-gray-200 rounded shadow-lg text-sm w-48">
                        <div class="font-bold text-gray-800 border-b pb-1 mb-2">${task.name}</div>
                        <div class="text-gray-600 mb-1">完成進度: <span class="text-blue-600 font-bold">${task.progress}%</span></div>
                        <div class="text-gray-500 text-xs">預計結束: ${end_date}</div>
                    </div>
                `;
            }
        });

        // 3. 切換檢視模式的函數
        function changeView(mode) {
            gantt.change_view_mode(mode);
        }

        // 4. 輔助函數：顯示簡單的狀態回饋
        function showStatus(msg) {
            const el = document.getElementById('status-msg');
            el.innerText = msg;
            el.classList.add('text-green-600');
            setTimeout(() => {
                el.classList.remove('text-green-600');
            }, 2000);
        }
    </script>
</body>
</html>