---
# YAML Front Matter：文章設定區塊
title: "第3篇紀錄:轉移到win11 wsl2使用Jekyll雜談"
description: "欲知辛苦有誰知，且用Gemini免費版便知曉。我只是想要在wsl上面一鍵啟用開發資料夾而已，沒想到那麼費心！"
categories: ["Vibe Coding",'wsl']   # 這是您的分類，可以自己決定
tags: ["Jekyll","Gemini"]           # 這是文章的標籤
---

# 跨越障礙：在 WSL 2 中完美啟用 `code .` 命令的艱辛歷程

## 摘要

對於使用 Windows Subsystem for Linux (WSL) 進行開發的工程師來說，能在 Linux 終端機中輸入 `code .` 並且啟動 Windows 上的 Visual Studio Code，是提升效率的基石。然而，這個看似簡單的設定，在實際操作中卻可能因為 Windows 與 Linux 之間的環境差異、PATH 變數衝突以及檔案類型不兼容，演變成一場艱難的除錯挑戰。本文將紀錄我們如何從「命令找不到」到「批次檔執行錯誤」，最終透過直接執行主程式 (`Code.exe`) 解決這個跨系統障礙的全過程。

---

## 挫折紀錄：尋找 `code` 命令的漫漫長路

我們在配置過程中經歷了四個主要的挫折點，每一次都讓我們更接近真相。

| 階段 | 問題描述 (錯誤訊息) | 錯誤原因分析 | 採取的行動 |
| :--- | :--- | :--- | :--- |
| **I** | `Command 'code' not found` | WSL 環境的 `$PATH` 中沒有指向 Windows VS Code 的連結。 | 嘗試使用 `snap install code` 或手動建立符號連結 (`ln -s`)。 |
| **II** | `which code` 找不到連結，或 `code .` 失敗 (`No such file or directory`)。 | Bash Shell 的緩存問題 (`hash -r` 解決)，或手動建立的符號連結 (`ln -s`) 路徑錯誤，或 Bash 無法正確解析跨系統連結。 | 手動建立符號連結，並使用 `hash -r` 清除 Shell 緩存。 |
| **III** | `/usr/local/bin/code: 3: exec: .../code: not found` | 符號連結的路徑不精確，或 `Code.exe` 檔案位置錯誤。 | 使用 PowerShell 準確找到 `code.cmd` 的路徑，並將 WSL 腳本指向它。 |
| **IV** | `/mnt/c/.../code.cmd: 1: @echo: not found` | WSL Shell 嘗試執行 Windows 的批次檔 (`.cmd`)，導致 Bash 無法識別 Windows 命令。 | 嘗試透過 `cmd.exe /C ...` 執行批次檔，但因 Windows 無法處理 Bash 的工作目錄路徑而失敗。 |

---

## 最終解決方案：直接執行主程式 (`Code.exe`)

最終的解決方案是放棄執行 `code.cmd` 批次檔，並直接執行 VS Code 的主程式 `Code.exe`。這樣可以繞過所有 Shell 兼容性和路徑轉換的複雜性，讓 VS Code 內建的 WSL 遠端擴充功能接管路徑轉換。 


# 跨越障礙：在 WSL 2 中完美啟用 `code .` 命令的艱辛歷程

## 流程圖說明與總結

## 🚀 WSL 環境下 `code .` 命令的除錯流程圖

{% raw %}
<div class="mermaid">
graph TD
    A[開始：在 WSL 中輸入 code .] --> B{VS Code 是否開啟？};
    B -- 是 (成功) --> Z[配置完成：開始開發！];
    B -- 否 (失敗/錯誤) --> C[步驟 1：確認 Code.exe 路徑];

    C --> D[步驟 2：創建 /usr/local/bin/code 腳本];
    D --> E[步驟 3：設定腳本執行權限];
    E --> F[步驟 4：執行 code . 測試];
    F --> B;
</div>
{% endraw %}


{% raw %}
<div class="mermaid">
graph TD
    A[開始] --> B(檢查配置);
    B -- 成功 --> C{顯示範本};
    B -- 失敗 --> D[確認 head.html 中的腳本];
    C --> E[結束：Mermaid 正常運作];
    D --> C;
</div>
{% endraw %}